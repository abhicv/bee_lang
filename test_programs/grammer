program: definitions

definitions: 
        | struct_def definitions
        | function_def definitions
        | struct_def
        | function_def
        
struct_def: 
        | 'struct' identifier '{' fields '}'

type_annotation: 
        | identifier
        | identifier '[' number_literal ']'
        | identifier '[' ']'

fields: 
        | identifier ':' type_annotation ';' fields
        | identifier ':' type_annotation ';'
        | empty
        
function_def: 
        | 'fn' identifier '(' parameters ')' ':' return_type '{' statement_list '}'

parameters: 
        | identifier ':' type_annotation ',' parameters
        | identifier ':' type_annotation
        | empty

return_type: 
        | type_annotation, type_annotation
        | type_annotation
        | empty

struct_field_access : 
        | identifier '.' struct_field_access
        | identifier '.' identifier

l_value : 
        | identifier
        | struct_field_access
        | identifier '[' expression ']'

statement_list: 
        | statement statement_list
        | statement
        | empty

statement: 
        | assignment_stmt
        | var_decl_stmt
        | return_statement
        | if_statement
        | while_statement
        | expr

assignment_stmt : 
        | l_value '=' expr ';'

var_decl_stmt: 
        | 'let' identifier : type_annotation ';'

while_statement: 
        | 'while' expr '{' statement_list '}'

if_statement: 
        | 'if' expr '{' statement_list '}'
        | 'if' expr '{' statement_list '} else '{' statement_list '}'
        | 'if' expr '{' statement_list '} else if_statement

return_statement: 'return' expr ';'

expr: expr '+' expr
